"use strict";(self.webpackChunkunishop_web=self.webpackChunkunishop_web||[]).push([[131],{60701:function(ce,J,r){r.r(J),r.d(J,{default:function(){return pe}});var se=r(97857),d=r.n(se),ae=r(15009),V=r.n(ae),me=r(99289),le=r.n(me),ue=r(68827),fe=r(56312),X=r(61204),he=r(56953),ve=r(54463),ne=r(45977),ge=r(87536),ie=r(64712),S=r(53968),de=r(57636),Z=r(87030),o=r(80499),$=r(27591),xe=r(81225),a=r(85893);function pe(){var e=(0,ue.c)(92),s=(0,X.useIntl)(),_e=(0,xe.cU)(),n=_e.sendEmail,_=_e.resetPassword,u,F;if(e[0]!==s){var Y;e[3]===Symbol.for("react.memo_cache_sentinel")?(Y=function(l){return l.password===l.password_confirmation},e[3]=Y):Y=e[3];var Me=S.Ryn({email:S.Dom(s.formatMessage({id:"auth.validation.email.invalid"})),code:S.Z_8().min(1,s.formatMessage({id:"auth.validation.code.required"})).regex(/^\d{4,6}$/,s.formatMessage({id:"auth.validation.code.format"})),password:S.Z_8().min(6,s.formatMessage({id:"auth.validation.password.minLength"})).max(32,s.formatMessage({id:"auth.validation.password.maxLength"})),password_confirmation:S.Z_8()}).refine(Y,{message:s.formatMessage({id:"auth.validation.password.mismatch"}),path:["password_confirmation"]});F=ge.cI,u=(0,fe.F)(Me),e[0]=s,e[1]=u,e[2]=F}else u=e[1],F=e[2];var H;e[4]!==u?(H={resolver:u},e[4]=u,e[5]=H):H=e[5];var t=F(H),Q;e[6]!==t||e[7]!==n||e[8]!==s?(Q=function(){var c=le()(V()().mark(function l(){var i,oe;return V()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,t.trigger("email");case 2:if(i=m.sent,i){m.next=5;break}return m.abrupt("return");case 5:return oe=t.getValues("email"),m.next=8,n.fetch({email:oe});case 8:n.data&&ie.Am.success(s.formatMessage({id:"auth.forgot.codeSentToast"}));case 9:case"end":return m.stop()}},l)}));return function(){return c.apply(this,arguments)}}(),e[6]=t,e[7]=n,e[8]=s,e[9]=Q):Q=e[9];var re=Q,k;e[10]!==_||e[11]!==s?(k=function(){var c=le()(V()().mark(function l(i){return V()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,_.fetch(i);case 2:_.data&&(ie.Am.success(s.formatMessage({id:"auth.forgot.successToast"})),X.history.push("/user/login"));case 3:case"end":return z.stop()}},l)}));return function(i){return c.apply(this,arguments)}}(),e[10]=_,e[11]=s,e[12]=k):k=e[12];var te=k,f;e[13]!==s?(f=s.formatMessage({id:"auth.forgot.title"}),e[13]=s,e[14]=f):f=e[14];var h;e[15]!==f?(h=(0,a.jsx)(Z.ll,{className:"text-2xl font-bold",children:f}),e[15]=f,e[16]=h):h=e[16];var v;e[17]!==s?(v=s.formatMessage({id:"auth.forgot.description"}),e[17]=s,e[18]=v):v=e[18];var g;e[19]!==v?(g=(0,a.jsx)(Z.SZ,{children:v}),e[19]=v,e[20]=g):g=e[20];var x;e[21]!==h||e[22]!==g?(x=(0,a.jsxs)(Z.Ol,{className:"text-center space-y-2",children:[h,g]}),e[21]=h,e[22]=g,e[23]=x):x=e[23];var p;e[24]!==t||e[25]!==te?(p=t.handleSubmit(te),e[24]=t,e[25]=te,e[26]=p):p=e[26];var M;e[27]!==s?(M=function(l){var i=l.field;return(0,a.jsxs)(o.xJ,{children:[(0,a.jsx)(o.lX,{children:s.formatMessage({id:"auth.forgot.emailPlaceholder"})}),(0,a.jsx)(o.NI,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(he.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)($.I,d()(d()({},i),{},{type:"email",placeholder:s.formatMessage({id:"auth.forgot.emailPlaceholder"}),className:"pl-10"}))]})}),(0,a.jsx)(o.zG,{})]})},e[27]=s,e[28]=M):M=e[28];var j;e[29]!==t.control||e[30]!==M?(j=(0,a.jsx)(o.Wi,{control:t.control,name:"email",render:M}),e[29]=t.control,e[30]=M,e[31]=j):j=e[31];var E;e[32]!==s||e[33]!==re||e[34]!==n.loading||e[35]!==n.countdown?(E=function(l){var i=l.field;return(0,a.jsxs)(o.xJ,{children:[(0,a.jsx)(o.lX,{children:s.formatMessage({id:"auth.forgot.codeLabel"})}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(o.NI,{children:(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(ve.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)($.I,d()(d()({},i),{},{type:"text",placeholder:s.formatMessage({id:"auth.forgot.codePlaceholder"}),className:"pl-10"}))]})}),(0,a.jsx)(de.z,{type:"button",variant:"outline",onClick:re,disabled:n.loading||n.countdown>0,className:"whitespace-nowrap",children:n.loading?s.formatMessage({id:"auth.forgot.sending"}):n.countdown>0?"".concat(n.countdown,"s"):s.formatMessage({id:"auth.forgot.sendCode"})})]}),(0,a.jsx)(o.zG,{})]})},e[32]=s,e[33]=re,e[34]=n.loading,e[35]=n.countdown,e[36]=E):E=e[36];var P;e[37]!==t.control||e[38]!==E?(P=(0,a.jsx)(o.Wi,{control:t.control,name:"code",render:E}),e[37]=t.control,e[38]=E,e[39]=P):P=e[39];var b;e[40]!==s?(b=function(l){var i=l.field;return(0,a.jsxs)(o.xJ,{children:[(0,a.jsx)(o.lX,{children:s.formatMessage({id:"auth.forgot.passwordLabel"})}),(0,a.jsx)(o.NI,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(ne.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)($.I,d()(d()({},i),{},{type:"password",autoComplete:"new-password",placeholder:s.formatMessage({id:"auth.forgot.passwordPlaceholder"}),className:"pl-10"}))]})}),(0,a.jsx)(o.zG,{})]})},e[40]=s,e[41]=b):b=e[41];var D;e[42]!==t.control||e[43]!==b?(D=(0,a.jsx)(o.Wi,{control:t.control,name:"password",render:b}),e[42]=t.control,e[43]=b,e[44]=D):D=e[44];var O;e[45]!==s?(O=function(l){var i=l.field;return(0,a.jsxs)(o.xJ,{children:[(0,a.jsx)(o.lX,{children:s.formatMessage({id:"auth.forgot.confirmPasswordLabel"})}),(0,a.jsx)(o.NI,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(ne.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)($.I,d()(d()({},i),{},{type:"password",autoComplete:"new-password",placeholder:s.formatMessage({id:"auth.forgot.confirmPasswordPlaceholder"}),className:"pl-10"}))]})}),(0,a.jsx)(o.zG,{})]})},e[45]=s,e[46]=O):O=e[46];var I;e[47]!==t.control||e[48]!==O?(I=(0,a.jsx)(o.Wi,{control:t.control,name:"password_confirmation",render:O}),e[47]=t.control,e[48]=O,e[49]=I):I=e[49];var N;e[50]!==_.loading||e[51]!==s?(N=_.loading?s.formatMessage({id:"auth.forgot.resetting"}):s.formatMessage({id:"auth.forgot.reset"}),e[50]=_.loading,e[51]=s,e[52]=N):N=e[52];var w;e[53]!==_.loading||e[54]!==N?(w=(0,a.jsx)(de.z,{type:"submit",className:"w-full",disabled:_.loading,children:N}),e[53]=_.loading,e[54]=N,e[55]=w):w=e[55];var q;e[56]===Symbol.for("react.memo_cache_sentinel")?(q=(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("span",{className:"w-full border-t border-border"})}),e[56]=q):q=e[56];var C;e[57]!==s?(C=s.formatMessage({id:"auth.misc.or"}),e[57]=s,e[58]=C):C=e[58];var L;e[59]!==C?(L=(0,a.jsxs)("div",{className:"relative my-6",children:[q,(0,a.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,a.jsx)("span",{className:"bg-card px-2 text-muted-foreground",children:C})})]}),e[59]=C,e[60]=L):L=e[60];var y;e[61]!==s?(y=s.formatMessage({id:"auth.forgot.backToLogin"}),e[61]=s,e[62]=y):y=e[62];var U;e[63]!==y?(U=(0,a.jsx)(X.Link,{to:"/user/login",className:"inline-block text-sm text-primary hover:text-primary/80 transition-colors font-medium",children:y}),e[63]=y,e[64]=U):U=e[64];var T;e[65]!==s?(T=s.formatMessage({id:"auth.forgot.noAccount"}),e[65]=s,e[66]=T):T=e[66];var R;e[67]!==s?(R=s.formatMessage({id:"auth.forgot.registerNow"}),e[67]=s,e[68]=R):R=e[68];var W;e[69]!==R?(W=(0,a.jsx)(X.Link,{to:"/user/register",className:"text-primary hover:text-primary/80 transition-colors font-medium",children:R}),e[69]=R,e[70]=W):W=e[70];var A;e[71]!==T||e[72]!==W?(A=(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[T," ",W]}),e[71]=T,e[72]=W,e[73]=A):A=e[73];var B;e[74]!==U||e[75]!==A?(B=(0,a.jsxs)("div",{className:"text-center space-y-2",children:[U,A]}),e[74]=U,e[75]=A,e[76]=B):B=e[76];var K;e[77]!==p||e[78]!==j||e[79]!==P||e[80]!==D||e[81]!==I||e[82]!==w||e[83]!==L||e[84]!==B?(K=(0,a.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[j,P,D,I,w,L,B]}),e[77]=p,e[78]=j,e[79]=P,e[80]=D,e[81]=I,e[82]=w,e[83]=L,e[84]=B,e[85]=K):K=e[85];var G;e[86]!==t||e[87]!==K?(G=(0,a.jsx)(Z.aY,{children:(0,a.jsx)(o.l0,d()(d()({},t),{},{children:K}))}),e[86]=t,e[87]=K,e[88]=G):G=e[88];var ee;return e[89]!==x||e[90]!==G?(ee=(0,a.jsxs)(Z.Zb,{children:[x,G]}),e[89]=x,e[90]=G,e[91]=ee):ee=e[91],ee}},54463:function(ce,J,r){r.d(J,{Z:function(){return ae}});var se=r(91373);const d=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ae=(0,se.Z)("shield-check",d)}}]);
